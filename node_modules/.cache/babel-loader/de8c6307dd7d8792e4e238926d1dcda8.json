{"ast":null,"code":"import _classCallCheck from\"/Applications/MAMP/htdocs/Marvel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Applications/MAMP/htdocs/Marvel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Applications/MAMP/htdocs/Marvel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Applications/MAMP/htdocs/Marvel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Component}from'react';import MarvelService from'../../services/MarvelService';import Spinner from'../spinner/Spinner';import ErrorMessage from'../errorMessage/ErrorMessage';import Skeleton from'../skeleton/Skeleton';import'./charInfo.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CharInfo=/*#__PURE__*/function(_Component){_inherits(CharInfo,_Component);var _super=_createSuper(CharInfo);function CharInfo(){var _this;_classCallCheck(this,CharInfo);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={char:null,loading:false,error:false};_this.marvelService=new MarvelService();_this.updateChar=function(){var charId=_this.props.charId;if(!charId){return;}_this.onCharLoading();_this.marvelService.getCharacter(charId).then(_this.onCharLoaded).catch(_this.onError);};_this.onCharLoaded=function(char){_this.setState({char:char,loading:false});};_this.onCharLoading=function(){_this.setState({loading:true});};_this.onError=function(){_this.setState({loading:false,error:true});};return _this;}_createClass(CharInfo,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateChar();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.charId!==prevProps.charId){this.updateChar();}}},{key:\"render\",value:function render(){var _this$state=this.state,char=_this$state.char,loading=_this$state.loading,error=_this$state.error;var skeleton=char||loading||error?null:/*#__PURE__*/_jsx(Skeleton,{});var errorMessage=error?/*#__PURE__*/_jsx(ErrorMessage,{}):null;var spinner=loading?/*#__PURE__*/_jsx(Spinner,{}):null;var content=!(loading||error||!char)?/*#__PURE__*/_jsx(View,{char:char}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"char__info\",children:[skeleton,errorMessage,spinner,content]});}}]);return CharInfo;}(Component);var View=function View(_ref){var char=_ref.char;var name=char.name,description=char.description,thumbnail=char.thumbnail,homepage=char.homepage,wiki=char.wiki,comics=char.comics;var imgStyle={'objectFit':'cover'};if(thumbnail==='http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg'){imgStyle={'objectFit':'contain'};}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"char__basics\",children:[/*#__PURE__*/_jsx(\"img\",{src:thumbnail,alt:name,style:imgStyle}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"char__info-name\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"char__btns\",children:[/*#__PURE__*/_jsx(\"a\",{href:homepage,className:\"button button__main\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"homepage\"})}),/*#__PURE__*/_jsx(\"a\",{href:wiki,className:\"button button__secondary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"Wiki\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"char__descr\",children:description}),/*#__PURE__*/_jsx(\"div\",{className:\"char__comics\",children:\"Comics:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"char__comics-list\",children:[comics.length>0?null:'There is no comics with this character',comics.map(function(item,i){// eslint-disable-next-line\nif(i>9)return;return/*#__PURE__*/_jsx(\"li\",{className:\"char__comics-item\",children:item.name},i);})]})]});};export default CharInfo;","map":{"version":3,"sources":["/Applications/MAMP/htdocs/Marvel/src/components/charInfo/CharInfo.jsx"],"names":["React","Component","MarvelService","Spinner","ErrorMessage","Skeleton","CharInfo","state","char","loading","error","marvelService","updateChar","charId","props","onCharLoading","getCharacter","then","onCharLoaded","catch","onError","setState","prevProps","skeleton","errorMessage","spinner","content","View","name","description","thumbnail","homepage","wiki","comics","imgStyle","length","map","item","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\n\nimport MarvelService from '../../services/MarvelService';\nimport Spinner from '../spinner/Spinner';\nimport ErrorMessage from '../errorMessage/ErrorMessage';\nimport Skeleton from '../skeleton/Skeleton';\n\nimport './charInfo.scss';\n\nclass CharInfo extends Component {\n\n    state = {\n        char: null,\n        loading: false,\n        error: false\n    }\n\n    marvelService = new MarvelService();\n\n    componentDidMount() {\n        this.updateChar();\n    }\n\n    componentDidUpdate(prevProps){\n        if (this.props.charId !== prevProps.charId) {\n            this.updateChar();\n        }\n    }\n\n\n    updateChar = () => {\n        const {charId} = this.props;\n        if (!charId) {\n            return;\n        }\n\n        this.onCharLoading();\n\n        this.marvelService\n            .getCharacter(charId)\n            .then(this.onCharLoaded)\n            .catch(this.onError);\n    }\n\n    onCharLoaded = (char) => {\n        this.setState({\n            char, \n            loading: false\n        })\n    }\n\n    onCharLoading = () => {\n        this.setState({\n            loading: true\n        })\n    }\n\n    onError = () => {\n        this.setState({\n            loading: false,\n            error: true\n        })\n    }\n\n    render() {\n        const {char, loading, error} = this.state;\n\n        const skeleton = char || loading || error ? null : <Skeleton/>;\n        const errorMessage = error ? <ErrorMessage/> : null;\n        const spinner = loading ? <Spinner/> : null;\n        const content = !(loading || error || !char) ? <View char={char}/> : null;\n\n        return (\n            <div className=\"char__info\">\n                {skeleton}\n                {errorMessage}\n                {spinner}\n                {content}\n            </div>\n        )\n    }\n}\n\nconst View = ({char}) => {\n    const {name, description, thumbnail, homepage, wiki, comics} = char;\n\n    let imgStyle = {'objectFit' : 'cover'};\n    if (thumbnail === 'http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg') {\n        imgStyle = {'objectFit' : 'contain'};\n    }\n\n    return (\n        <>\n            <div className=\"char__basics\">\n                <img src={thumbnail} alt={name} style={imgStyle}/>\n                <div>\n                    <div className=\"char__info-name\">{name}</div>\n                    <div className=\"char__btns\">\n                        <a href={homepage} className=\"button button__main\">\n                            <div className=\"inner\">homepage</div>\n                        </a>\n                        <a href={wiki} className=\"button button__secondary\">\n                            <div className=\"inner\">Wiki</div>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div className=\"char__descr\">\n                {description}\n            </div>\n            <div className=\"char__comics\">Comics:</div>\n            <ul className=\"char__comics-list\">\n                {comics.length > 0 ? null : 'There is no comics with this character'}\n                {\n                    comics.map((item, i) => {\n                        // eslint-disable-next-line\n                        if (i > 9) return;\n                        return (\n                            <li key={i} className=\"char__comics-item\">\n                                {item.name}\n                            </li>\n                        )\n                    })\n                }                \n            </ul>\n        </>\n    )\n}\n\nexport default CharInfo;"]},"metadata":{},"sourceType":"module"}